Изучение свойств полевого транзистора
=====================================

Цель
----

Изучить свойства полевого транзистора с изолированным затвором с индуцированным каналом.
Построить графики зависимости тока и напряжения на участке сток-исток от тока и напряжения на участке затвор-исток.
Проверить теоретическое значение напряжения открытия транзистора на участке Затвор-Исток.

Введение
--------

Полевой транзистор (MOSFET = МОП = МДП)

MOSFET - Metall-Oxide-Semiconductor-Field Effect Transistor
МОП - металл-окисл-полупроводник
МДП - металл-диэлектрик-полупроводник

Полевые транзисторы бывают следующих видов:

- с "p-n" переходом (изначально ОТКРЫТ)
- с изолированным затвором
	- с встроенным каналом (изначально ОТКРЫТ)
	- с индуцированным каналом (изначально ЗАКРЫТ) (наиболее часто встречающиеся)

Полевые транзисторы с "p-n" переходом
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

В изначальном состоянии (без приложенного напряжения на Затвор) транзисторы с "p-n" переходом открыты.
Т.е. если подать напряжение на переход Сток-Исток, то через транзистор потечет ток.
Например, для транзистора с "p-n" переходом с n-каналом на Сток нужно подать (+), на Исток нужно подать (-).
Для их закрытия необходимо приложить напряжение на Затвор.
Например, для транзистора с "p-n" переходом с n-каналом на Затвор нужно подать (-).

.. note::
	Даже если не подавать напряжение на Затвор, с увеличением напряжения! Сток-Исток транзистор будет "призакрываться".

Полевые транзисторы с изолированным затвором с индуцированным каналом
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

В изначальном состоянии полевые транзисторы с изолированным затвором с индуцированным каналом закырты.
Канал индуцируется только в момент подачи НАПРЯЖЕНИЯ на Затвор-Исток.
Т.е. управление осуществляется НАПРЯЖЕНИЕМ!!!

Полевые транзисторы  изолированным затвором с индуцированным каналом обладают высоким входным сопротивлением на участке Затвор-Исток.
Т.е. для их управления требуется минимальная мощьность, в отличии от биполярных транзисторов, где ток База-Эмиттер не нулевой.
Управляющий ток очень низкий, т.к. Затвор крепится на диэлектрик (SiO2-окись кремния).

Полевые транзисторы с изолированным затвором с индуцированным каналом n-p-n типа с n-каналом:

Исток / source (-)
Затвор / gate (+) (управляющее напряжение!!!)
Сток / drain (+)

          │ С/D (+)
З/G   ┌───┘ 
 +  │ │     
 ───┤ ◄─┐   
    │ │ │   
      └─┴─┐ 
          │ И/S (-)

Ниже приведена физическая структура Полевого транзистора с изолированным затвором с индуцированным каналом n-p-n типа с n-каналом.

           │И/S    │З/G    │С/D     
           │(-)    │(+)    │(+)     
  ┌────────┤       │       │        
  │        │       │       │        
  │  ┌─────┼───────┴───────┼─────┐  
  │  │     │   Диэлектрик  │     │  
  │  ├───┬─┴─┬───────────┬─┴─┬───┤  
  │  │   │ n │ (-)(-)(-) │ n │   │  
  │  │   └───┘           └───┘   │  
  │  │                           │  
  │  │                           │  
  │  │ p                         │  
  │  └─────────────┬─────────────┘  
  │                │ Подложка
  └────────────────┘ (-)            

Если подать на Затвор (+), а на Подложку (-), то электроны притянутся к Затвору и создадут n-канал, через который сможет протекать ток.

.. note::
	Исток-Подложка-Сток образуют паразитный биполятрный транзистор.
	Чтобы от него избавиться, Подложку и Исток закорачивают.
	
.. note::
	Исток-Сток образуют паразитный диод.
	Т.е., если подать (+) на Подложку/Исток и (-) на Сток, то через p-n переход потечет ток.

.. note::
	Затвор-Исток - это, фактически, емкость. Пластина Затвора, диэлктрик и пластина Подложки образуют емкость.
	На этой емкости скапливается заряд.
	Т.о., даже если убрать напряжение с Затвора, заряд останется и n-канал будет существовать до тех пор, пока эта емкость не разрядится.
	Т.е., транзистор будет открыт даже после снятия напряжения.

Примеры:

- Полевой транзистор с изолированным затвором с индуцированным каналом n-p-n типа с n-каналом: IRF540
- Полевой транзистор с изолированным затвором с индуцированным каналом p-n-p типа с p-каналом: IRF9540

Основные параметры МДП транзисторов:

- UDS - максимаольное напряжение Сток-Исток
- UGS - максимаольное напряжение Затвор-Исток
- UGS(th) - минимальное напряжение Затвор-Исток, необходимое для открытия транзистора.
- ID - максимальный ток Стока.
- RDS - сопротивление Сток-Исток в открытом состоянии.

Схема подключения МДП транзистора для работы в качестве ключа.
                          ┌─────────┐     
                          │         │     
                        ┌─┴─┐       │     
                        │   │ Rn    │     
                        │   │       │     
                        └─┬─┘       │     
                          │         │     
        Rg            ┌───┘ С     + │  Un
     ┌─────┐      З │ │          ───┴───  
   ┌─┤     ├─┬──────┤ ◄─┐          ─┬─    
   │ └─────┘ │      │ │ │           │     
 + │ Uупр  ┌─┴─┐      └─┴─┐ И       │     
───┴───    │   │ R1       │         │     
  ─┬─      │   │          │         │     
   │       └─┬─┘          │         │     
   │         │            │         │     
   └─────────┴────────────┴─────────┘     
                                          
R1 - Сопротивление R1 нужно для того, чтобы транзистор разряжался и выключался. В противном случае транзистор не будет закрываться.
Rg - Защитное сопротивление, чтобы не было слишком большого тока в момент открытия транзистора.

На основе:
22.2 Полевые транзисторы с изолированным затвором, Забарило
22.3 Основные параметры и проерка работы MOSFET, Забарило
22.4 Исследование работы MOSFET в режиме ключа, Забарило

Описание опыта
--------------

Общая схема подключения

                                          ┌────────┬──────┐     
                                          │        │ +    │     
                                        ┌─┴─┐Rn ┌──┴─┐    │     
                                        │   │   │ Ch3│    │     
                     +┌────┐            │   │   └──┬─┘    │     
                   ┌──┤ Ch1├──┐         └─┬─┘      │      │     
                   │  └────┘  │           ├────────┤      │     
                   │     Rg   │ З/G   ┌───┘ С/D(+) │    + │  Un
                   │  ┌─────┐ │ (+) │ │            │   ───┴───  
     ┌─────────┬───┴──┤     ├─┴─┬───┤ ◄─┐   VT1    │     ─┬─    
     │         │      └─────┘   │   │ │ │          │      │     
 ┌───┴───┐   ┌─┴─┐R1            │     └─┴─┐        │ +    │     
 │ Gen1  │   │   │            ┌─┴──┐      │ И/S ┌──┴─┐    │     
 └───┬───┘   │   │            │ Ch2│      │     │ Ch4│    │     
     │       └─┬─┘            └─┬──┘      │     └──┬─┘    │     
     │         │                │         │        │      │     
     └─────────┴────────────────┴─────────┴────────┴──────┘       

VT1 - IRL3705N (Полевой транзистор с изолированным затвором с индуцированным каналом n-p-n типа с n-каналом в корпусе TO-220.)
	VDS - 55 В
	ID - 89 A
	VGS(th) - 1-2 В
Rg - 100 КОм (Изначально 100 Ом. Защитное сопротивление на случай пробоя перехода Затвор-Исток транзистора, чтобы не было короткого замыкания. В данном случае 100 КОм для того, чтобы увеличить время зарада паразитной емкости Затвор-Исток, для наблюдения за переходным процессом при открытии транзистора.)
R1 - 10 КОм (Подтягивающий резистр для защиты от ложных срабатываний. В данном случае не нужен, т.к. нет висящего провода. Был убран из схемы.)
Rn - 1 КОм
Un - 8.5 В
Cзи - 1.5 нФ (измеренное значение на переходе Затвор-Исток)
Gen1 - 0-5 В (треугольник / импульсы)
	Tau (sec) = Rg (Om) * Cзи (Farad) = 100 000 * 1.5 * 10**(-9) = 0.15 мили Сек.
	Через время 5 Тау происходит (почти) полный заряд конденсатора.
	F(Gen1)=1/2*5*Tau = 666 ~= 600 Гц / 500 Гц (использовалось в схеме VER1 / VER2)

Построить графики зависимости тока и напряжения на переходе Сток-Исток от тока и напряжения на переходе Затвор-Исток.

Проверить наличие паразитного диода.

Проверить наличие паразитного конденсатора Затвор-Исток.
По идее, паразитный конденсатор существует и на переходе Затвор-Сток, но меньшей емкости.
Проверить, что транзистор откроется и останется открытым после приложения напряжения на Завтор-Сток.

Ожидаемый результат
-------------------

Переход Сток-Исток должен открываться при напряжении Затвор-Исток 2 В.
Ток Затвор-Исток когда переход Сток-Исток открыт согласно документации не должен превышать 100 нА.
В момент включения ток на переходе Затвор-Исток может достигать 0.05 А за счет заряда конденсатора (I = U/R = 5/100 = 0.05 А)
Сопротивление на переходе Сток-Исток в открытом состоянии 0.01 Ом.

Лабораторна работа
------------------

VER1
^^^^

Измерения выполнены для треугольных импульсов на частоте 600 Гц.

Основные измерения:

- VER1/Ch1_Ch2.csv - CH1 - Ch1 U(Rg), CH2 - Ch2 U(GS инвертированный). Общий - Затвор.
- VER1/Ch2.csv - CH1 - U(Gen1), CH2 - Ch2 U(GS). Общий - Общий.
- VER1/Ch3.csv - CH1 - Ch3 U(Rn), CH2 - нет. Общий - Сток.
- VER1/Ch4.csv - CH1 - U(Gen1), CH2 - Ch4 U(DS). Общий - Общий.

Дополнительные измерения без Un:

- VER1/Ch1_Ch2_no_Un.csv - Измерение на Ch1 с инвертированным Ch2 на втором канале без Un.

VER2
^^^^

Измерения выполнены для треугольных импульсов на частоте 500 Гц.
Без сопротивления R1.

Основные измерения:

- VER2/Ch1_Ch2.csv - CH1 - Ch1 U(Rg), CH2 - Ch2 U(GS инвертированный). Общий - Затвор.
- VER2/Ch2.csv - CH1 - U(Gen1), CH2 - Ch2 U(GS). Общий - Общий.
- VER2/Ch3.csv - CH1 - Ch3 U(Rn), CH2 - U(DS инвертированный). Общий - Сток.
- VER2/Ch4.csv - CH1 - U(Gen1), CH2 - Ch4 U(DS). Общий - Общий.

Дополнительные измерения:

- VER2/Ch1_Ch2_no_Un.csv - Измерение на Ch1 с инвертированным Ch2 на втором канале без Un.

Ошибки ожидания
---------------

1. 

Выводы
------

1. Сопротивление R1 в данной схеме лишнее и не влияет на результаты. Это подтвердилось экспериментально.

2. При достижении напряжения открытия (1.9В в данном случае) на переходе Затвор-Исток, переход Сток-Исток начинает открываться, даже если паразитная емкость не полностью заряжена. Т.е. n-канал и паразитная емкость существуют независимо друг от друга. Паразитная емкость лишь может замедлять время, за которое достигается напряжение открытия. И затем паразитная емкость может поддерживать напряжение открытия даже без приложения внешнего напряжения.

3. Если к переходу Сток-Исток приложено напряжение, то во время перехода Сток-Исток из закрытого состояния в открытое (и наоборот) заряд (разряд) паразитной емкости замедляется и на графике видно плато, в отличие от графика, когда на переходе Сток-Исток нет напряжения.

4. Изменение перехода Сток-Исток из закрытого состоя в открытое (и наоборот) происходит не мгновенно, а на диапазоне напряжения на переходе Затвор-Исток, примерно 1.9В - 2В. Т.е., на этом диапазоне напряжения транзистор работает, как бы в усилительном режиме. Т.е. чем дольше происходит переход через диапазон 1.9В - 2В, тем больше мощьности теряется на сопротивлении Сток-Исток.

5. Защитное сопротивление Rg увеличивает время заряда паразитного конденсатора, т.е. его не желательно брать слишком большим.
В эксперименте с прямоугольными импульсами (VER2) время полного открытия перехода Сток-Исток составило 140 микро Сек.
В то же время, если Rg будет слишком мальеньким, то через него будет протекать большой ток в момент открытия.
Например, при Rg=100 Ом и управляющем напряжении Завтор-Сток 5 В. ток в момент подачи напряжения будет 0.05 А (I = U/R = 5/100 = 0.05 А), что составит 0.25 Вт (P = I*U = 0.05*5 = 0.25 Вт), а это предел для SMD резистора типоразмером 1206.
В то же время, мы не можем брать сопротивление Rg слишком большим. Во первых, из-за увеличения времени открытия перехода Сток- Исток, а главное, из-за того, что сопротивление Rg должно быть меньше чем притягивающее сопротивление R1, чтобы обеспечить необходимое падение напряжения на переходе Затвор-Исток.

Вопросы
-------

1. Какое должно быть оптимальное сопротивление Rg для того, чтобы уменьшить потери мощности во время открытия перехода Сток-Исток?

2. Если в диапазоне открытия перехода Сток-Исток (1.9В - 2В) транзистор работает в режиме усиления, то через переход Затвор-Исток должен протекать ток. Это наблюдается на графике в виде изгиба кривой заряда паразитного конденсатора в районе 1.9В - 2В. Если подать постоянное напряжение 1.9В - 2В на переход Затвор-Исток, будет ли через него протекать постоянный ток (с учетом того, что там диэлектрик)?

3. Согласно расчетам, сопротивление на переходе Сток-Исток в закрытом состоянии порядка 100КОм. Но, согласно теории, сопротивление должно быть 10^12 - 10^14 Ом. Если поставить Rn 100КОм, будет ли одинаковое падение напряжения на переходе Сток-Исток и на Rn? Т.е. действительно ли сопротивление Сток-Исток в закрытом состоянии 100КОм или это погрешность расчетов?

Обработка результатов измерений VER1
------------------------------------

Adjustments

.. code-block::

	data_file_1 = 'Ch1_Ch2.csv'
	data_file_2 = 'Ch2.csv'
	data_file_3 = 'Ch3.csv'
	data_file_4 = 'Ch4.csv'
	data_file_5 = 'Ch1_Ch2_no_Un.csv'

	# Adjustments

	index_start_1 = 750
	index_start_2 = 504
	index_start_3 = 656-235
	index_start_4 = 505
	index_start_5 = 814

	zero_1 = 0
	zero_2 = 0
	zero_3 = 0
	zero_4 = 0
	zero_5 = 0

	num_points = 3200

	ldf_1 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_1}'), skip_rows=8)
		.select(
			pl.col('index'),
			pl.col('CH1_Voltage(mV)').alias('Rg_Voltage(mV)(Ch1_Ch2)'),
			(pl.col('CH2_Voltage(mV)')  * (-1)).alias('GS_Voltage(mV)(Ch1_Ch2)')
		)
	)

	ldf_2 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_2}'), skip_rows=8)
		.rename({'CH1_Voltage(mV)':'Gen_Voltage(mV)(Ch2)', 'CH2_Voltage(mV)': 'GS_Voltage(mV)(Ch2)'})
	)

	ldf_3 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_3}'), skip_rows=8)
		.rename({'CH1_Voltage(mV)': 'Rn_Voltage(mV)(Ch3)', 'CH2_Voltage(mV)': 'CH2_Voltage(mV)(Ch3)'})
	)

	ldf_4 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_4}'), skip_rows=8)\
		.rename({'CH1_Voltage(mV)':'Gen_Voltage(mV)(Ch4)', 'CH2_Voltage(mV)': 'DS_Voltage(mV)(Ch4)'})
	)

	ldf_5 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_5}'), skip_rows=8)
		.select(
			pl.col('index'),
			pl.col('CH1_Voltage(mV)').alias('Rg_Voltage(mV)(Ch1_Ch2_no_Un)'),
			(pl.col('CH2_Voltage(mV)')  * (-1)).alias('GS_Voltage(mV)(Ch1_Ch2_no_Un)')
		)
	)

	ldf = ldf_1.join(ldf_2, on=['index'], how='inner', suffix='2')
	ldf = ldf.join(ldf_3, on=['index'], how='inner', suffix='3')
	ldf = ldf.join(ldf_4, on=['index'], how='inner', suffix='4')
	ldf = ldf.join(ldf_5, on=['index'], how='inner', suffix='4')

	ldf_adj = (
		ldf_1.select(
			(pl.col('index')-index_start_1).alias('index'),
			(pl.col('Rg_Voltage(mV)(Ch1_Ch2)')-zero_1),
		).filter((pl.col('index')>0) & (pl.col('index')<num_points))
		.join(
			ldf_2.select(
				(pl.col('index')-index_start_2).alias('index'),
				pl.col('Gen_Voltage(mV)(Ch2)')-zero_2,
				pl.col('GS_Voltage(mV)(Ch2)')-zero_2,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
		.join(
			ldf_3.select(
				(pl.col('index')-index_start_3).alias('index'),
				pl.col('Rn_Voltage(mV)(Ch3)')-zero_3,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
		.join(
			ldf_4.select(
				(pl.col('index')-index_start_4).alias('index'),
				pl.col('DS_Voltage(mV)(Ch4)')-zero_4,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
		.join(
			ldf_5.select(
				(pl.col('index')-index_start_5).alias('index'),
				pl.col('Rg_Voltage(mV)(Ch1_Ch2_no_Un)')-zero_5,
				pl.col('GS_Voltage(mV)(Ch1_Ch2_no_Un)')-zero_5,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
	)

	display(ldf_adj.head(3).collect())
	ldf_adj.collect().write_csv(downloads.joinpath('_NEW/result.csv'))

	ldf.hvplot.line(
		# xlim=(0, 100), ylim=(0, 100),
		width=400,  # width (default=700)/height (default=300): int
		# rot=90,
		# legend='top_left',
		subplots=True,
		shared_axes=True,
	).cols(2)

Save

.. code-block::

	# save figure and show the plot

	plot = ldf_adj.hvplot.line(
		# xlim=(0, 100), ylim=(0, 100),
		width=900,  # width (default=700)/height (default=300): int
		height=500,
		# rot=90,
		# legend='top_left',
		# subplots=True,
		# shared_axes=True,
	)

	plot
	# hvplot.save(plot, downloads.joinpath('_NEW\ec_009_MOSFET(VER1).html'))

Расчетные значения тока и сопротивления

.. code-block::

	Rg = 100000
	Rn = 1000

	plot = ldf_adj.with_columns(
		(pl.col('Rg_Voltage(mV)(Ch1_Ch2)') / Rg).alias('Igs(mA)'),
		(pl.col('Rn_Voltage(mV)(Ch3)') / Rn).alias('In(mA)'),
	).with_columns(
		(pl.col('DS_Voltage(mV)(Ch4)') / pl.col('In(mA)')).alias('Rds(Om)')
	).select(
		pl.col('index', 'Igs(mA)', 'In(mA)', 'Rds(Om)'),
	).hvplot.line(
		# xlim=(0, 100), ylim=(0, 100),
		width=900,  # width (default=700)/height (default=300): int
		height=500,
		# rot=90,
		# legend='top_left',
		subplots=True,
		shared_axes=False,
	).cols(1)

	plot
	# hvplot.save(plot, downloads.joinpath('_NEW\ec_009_MOSFET_Meas(VER1).html'))

Обработка результатов измерений VER2
------------------------------------

Adjustments

.. code-block::

	data_file_1 = 'Ch1_Ch2.csv'
	data_file_2 = 'Ch2.csv'
	data_file_3 = 'Ch3.csv'
	data_file_4 = 'Ch4.csv'
	data_file_5 = 'Ch1_Ch2_no_Un.csv'

	# Adjustments

	index_start_1 = 1560-500
	index_start_2 = 1560-500
	index_start_3 = 1480-500
	index_start_4 = 1560-500
	index_start_5 = 1560-500

	zero_1 = 80
	zero_2 = 80
	zero_3 = 80
	zero_4 = 80
	zero_5 = 80

	num_points = 3700

	ldf_1 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_1}'), skip_rows=8)
		.select(
			pl.col('index'),
			pl.col('CH1_Voltage(mV)').alias('Rg_Voltage(mV)(Ch1_Ch2)'),
			(pl.col('CH2_Voltage(mV)')  * (-1)).alias('GS_Voltage(mV)(Ch1_Ch2)')
		)
	)

	ldf_2 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_2}'), skip_rows=8)
		.rename({'CH1_Voltage(mV)':'Gen_Voltage(mV)(Ch2)', 'CH2_Voltage(mV)': 'GS_Voltage(mV)(Ch2)'})
	)

	ldf_3 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_3}'), skip_rows=8)
		.select(
			pl.col('index'),
			pl.col('CH1_Voltage(mV)').alias('Rn_Voltage(mV)(Ch3)'),
			(pl.col('CH2_Voltage(mV)')  * (-1)).alias('DS_Voltage(mV)(Ch3)')
		)
	)

	ldf_4 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_4}'), skip_rows=8)\
		.rename({'CH1_Voltage(mV)':'Gen_Voltage(mV)(Ch4)', 'CH2_Voltage(mV)': 'DS_Voltage(mV)(Ch4)'})
	)

	ldf_5 = (
		pl.scan_csv(downloads.joinpath(f'_NEW\{data_file_5}'), skip_rows=8)
		.select(
			pl.col('index'),
			pl.col('CH1_Voltage(mV)').alias('Rg_Voltage(mV)(Ch1_Ch2_no_Un)'),
			(pl.col('CH2_Voltage(mV)')  * (-1)).alias('GS_Voltage(mV)(Ch1_Ch2_no_Un)')
		)
	)

	ldf = ldf_1.join(ldf_2, on=['index'], how='inner', suffix='2')
	ldf = ldf.join(ldf_3, on=['index'], how='inner', suffix='3')
	ldf = ldf.join(ldf_4, on=['index'], how='inner', suffix='4')
	ldf = ldf.join(ldf_5, on=['index'], how='inner', suffix='4')

	ldf_adj = (
		ldf_1.select(
			(pl.col('index')-index_start_1).alias('index'),
			(pl.col('Rg_Voltage(mV)(Ch1_Ch2)')-zero_1),
		).filter((pl.col('index')>0) & (pl.col('index')<num_points))
		.join(
			ldf_2.select(
				(pl.col('index')-index_start_2).alias('index'),
				pl.col('Gen_Voltage(mV)(Ch2)')-zero_2,
				pl.col('GS_Voltage(mV)(Ch2)')-zero_2,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
		.join(
			ldf_3.select(
				(pl.col('index')-index_start_3).alias('index'),
				pl.col('Rn_Voltage(mV)(Ch3)')-zero_3,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
		.join(
			ldf_4.select(
				(pl.col('index')-index_start_4).alias('index'),
				pl.col('DS_Voltage(mV)(Ch4)')-zero_4,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
		.join(
			ldf_5.select(
				(pl.col('index')-index_start_5).alias('index'),
				pl.col('Rg_Voltage(mV)(Ch1_Ch2_no_Un)')-zero_5,
				pl.col('GS_Voltage(mV)(Ch1_Ch2_no_Un)')-zero_5,
			).filter((pl.col('index')>0) & (pl.col('index')<num_points)),
			on=['index'], how='inner')
	)

	display(ldf_adj.head(3).collect())
	ldf_adj.collect().write_csv(downloads.joinpath('_NEW/result.csv'))

	ldf.hvplot.line(
		# xlim=(0, 100), ylim=(0, 100),
		width=400,  # width (default=700)/height (default=300): int
		# rot=90,
		# legend='top_left',
		subplots=True,
		shared_axes=True,
	).cols(2)

save figure and show the plot

.. code-block::

	plot = ldf_adj.hvplot.line(
		# xlim=(0, 100), ylim=(0, 100),
		width=900,  # width (default=700)/height (default=300): int
		height=500,
		# rot=90,
		# legend='top_left',
		# subplots=True,
		# shared_axes=True,
	)

	plot
	# hvplot.save(plot, downloads.joinpath('_NEW\ec_009_MOSFET(VER2).html'))

Расчетные значения тока и сопротивления

.. code-block::

	Rg = 100000
	Rn = 1000

	plot = ldf_adj.with_columns(
		(pl.col('Rg_Voltage(mV)(Ch1_Ch2)') / Rg).alias('Igs(mA)'),
		(pl.col('Rn_Voltage(mV)(Ch3)') / Rn).alias('In(mA)'),
	).with_columns(
		(abs(pl.col('DS_Voltage(mV)(Ch4)') / pl.col('In(mA)'))).alias('Rds(Om)')
	).select(
		pl.col('index', 'Igs(mA)', 'In(mA)', 'Rds(Om)'),
	).hvplot.line(
		# xlim=(0, 100), ylim=(0, 100),
		width=900,  # width (default=700)/height (default=300): int
		height=500,
		# rot=90,
		# legend='top_left',
		subplots=True,
		shared_axes=False,
	).cols(1)

	plot
	# hvplot.save(plot, downloads.joinpath('_NEW\ec_009_MOSFET_Meas(VER2).html'))

Список литературы
-----------------

1. http://asciiflow.com/
